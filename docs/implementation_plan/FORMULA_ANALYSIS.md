# Анализ формул и алгоритмов плана реализации

**Author:** Vasiliy Zdanovskiy  
**Email:** vasilyvz@gmail.com

**Дата анализа:** 2024-12-03

---

## Использование индекса теории

✅ **Используется индекс:** `docs/ALL_index.yaml`  
✅ **Теория:** `docs/ALL.md` (раздел 13: JW–CMB)  
✅ **Техническая спецификация:** `docs/tech_spec.md` (разделы 13.6-13.9)

---

## Проверка формул на классические паттерны

### ✅ Формула CMB2.1: ρ_Θ(ω,t) ∝ ω^(-2±0.5) · (t/t_0)^(-3±1)

**Статус:** ✅ ПРАВИЛЬНО

**Анализ:**
- ✅ Использует спектральную плотность Θ-поля ρ_Θ(ω,t)
- ✅ Степенная зависимость от частоты (не экспоненциальная)
- ✅ Временная эволюция через степенной закон (t/t_0)^(-3±1)
- ✅ НЕТ потенциалов V(φ), V(Θ)
- ✅ НЕТ массовых членов m²φ², m²Θ²
- ✅ НЕТ экспоненциального затухания exp(-r/λ)

**Источник:** tech_spec.md раздел 13.11, формула (CMB2.1)

---

### ✅ Формула CMB2.2: l(ω) ≈ π D ω

**Статус:** ✅ ПРАВИЛЬНО

**Анализ:**
- ✅ Прямая связь частоты и мультиполя
- ✅ НЕТ классических космологических формул
- ✅ НЕТ использования FRW метрики
- ✅ НЕТ потенциалов

**Источник:** tech_spec.md раздел 13.8, JW–CMB2.9

---

### ✅ Формула CMB2.3: C_l ∝ ρ_Θ(ω(l)) · |dω/dl|

**Статус:** ✅ ПРАВИЛЬНО

**Анализ:**
- ✅ Прямой расчет из спектра ρ_Θ(ω,t)
- ✅ НЕТ классической формулы: C_l = (1/(2l+1)) * Σ_m |a_lm|²
- ✅ НЕТ разложения по сферическим гармоникам реконструированной карты
- ✅ НЕТ потенциалов
- ✅ НЕТ массовых членов

**Источник:** Вывод из CMB2.1 и CMB2.2

---

### ✅ Формула CMB2.4: C_l ∝ l⁻²

**Статус:** ✅ ПРАВИЛЬНО

**Анализ:**
- ✅ Степенная зависимость (не экспоненциальная)
- ✅ НЕТ Silk damping (exp(-l²/l_silk²))
- ✅ НЕТ экспоненциального затухания
- ✅ Результат прямого расчета из ρ_Θ(ω,t)

**Источник:** Следствие CMB2.1-CMB2.3

---

### ✅ Формула Δω/ω → ΔT: ΔT ~ T_0 · (Δω/ω_CMB)

**Статус:** ✅ ПРАВИЛЬНО

**Анализ:**
- ✅ Прямая конверсия из глубины узла
- ✅ НЕТ линейной аппроксимации
- ✅ НЕТ классических термодинамических формул
- ✅ НЕТ потенциалов
- ✅ НЕТ массовых членов

**Источник:** tech_spec.md раздел 13.6, JW-CMB.6, JW-CMB2.6

---

## Проверка алгоритмов на упрощения

### ✅ Phase 2.1: CMB Map Reconstruction

**Алгоритм:**
1. Integrate frequency spectrum ρ_Θ(ω,t) over frequencies
2. Convert node depths to temperatures: ΔT ~ T_0 · (Δω/ω_CMB)
3. Project nodes to sky coordinates using phase parameters only
4. Generate spherical harmonic map with integrated spectrum

**Анализ:**
- ✅ Интеграция спектра с самого начала (не пост-обработка)
- ✅ Используются ТОЛЬКО фазовые параметры (ω_min(t), ω_macro(t))
- ✅ НЕТ классических космологических формул (FRW, ΛCDM)
- ✅ НЕТ "proper motion"
- ✅ НЕТ потенциалов

**Статус:** ✅ ПРАВИЛЬНО

---

### ✅ Phase 3.1: Power Spectrum Calculation

**Алгоритм:**
1. Convert frequencies to multipoles: l(ω) ≈ π D ω
2. Calculate C_l directly from ρ_Θ(ω(l)) · |dω/dl|
3. Integrate over temporal evolution

**Анализ:**
- ✅ Прямой расчет из ρ_Θ(ω,t) (НЕ из реконструированной карты)
- ✅ НЕТ разложения по сферическим гармоникам
- ✅ НЕТ классической формулы C_l = (1/(2l+1)) * Σ_m |a_lm|²
- ✅ НЕТ Silk damping
- ✅ НЕТ экспоненциального затухания

**Статус:** ✅ ПРАВИЛЬНО

---

### ✅ Phase 3.2: Sub-peaks Analysis

**Алгоритм:**
1. Analyze ω_min(t) evolution for modulations
2. Extract beating frequencies from modulations
3. Convert to multipoles using l = π D ω

**Анализ:**
- ✅ Использует биения из ω_min(t) (фазовые параметры)
- ✅ НЕТ классических формул биений
- ✅ НЕТ потенциалов
- ✅ НЕТ массовых членов

**Статус:** ✅ ПРАВИЛЬНО

---

### ⚠️ Phase 2.3: Node-to-CMB Mapping

**Алгоритм:**
- Maps nodes from early universe (z≈1100) to current sky

**Потенциальная проблема:**
- Упоминание "cosmological projection" может подразумевать классические формулы

**Проверка:**
- ✅ Докстринг указывает: "Uses ONLY phase parameters"
- ✅ НЕТ упоминания FRW, ΛCDM
- ✅ НЕТ "proper motion"

**Статус:** ✅ ПРАВИЛЬНО (с оговоркой - нужно убедиться, что реализация не использует классические формулы)

---

## Проверка на запрещенные элементы

### ❌ Экспоненциальное затухание

**Проверка:**
- ✅ НЕТ exp(-r/λ) в формулах
- ✅ НЕТ exp(-l²/l_silk²) (Silk damping)
- ✅ НЕТ exp(-t/τ) (временное затухание)
- ✅ Все зависимости степенные или прямые

**Статус:** ✅ НЕ НАЙДЕНО

---

### ❌ Потенциалы ВБП

**Проверка:**
- ✅ НЕТ V(φ) в формулах
- ✅ НЕТ V(Θ) в формулах
- ✅ НЕТ упоминания потенциалов в алгоритмах
- ✅ Все формулы работают с фазовыми параметрами и спектрами

**Статус:** ✅ НЕ НАЙДЕНО

---

### ❌ Массовые члены

**Проверка:**
- ✅ НЕТ m²φ² в формулах
- ✅ НЕТ m²Θ² в формулах
- ✅ НЕТ массовых членов в уравнениях
- ✅ Все зависимости от частот и фазовых параметров

**Статус:** ✅ НЕ НАЙДЕНО

---

### ❌ Классические космологические формулы

**Проверка:**
- ✅ НЕТ FRW метрики
- ✅ НЕТ уравнений Фридмана (классических)
- ✅ НЕТ ΛCDM формул
- ✅ НЕТ "proper motion"
- ✅ Используются ТОЛЬКО фазовые параметры

**Статус:** ✅ НЕ НАЙДЕНО

---

## Проверка на упрощенные алгоритмы

### ✅ Phase 4.1: CMB-LSS Correlation

**Алгоритм:**
- Calculate correlation functions between CMB and LSS
- Test correlation significance
- Analyze scale dependence

**Анализ:**
- ✅ Упоминается "Pearson correlation" - это допустимо, так как это статистический инструмент для измерения связи между данными, а не физическая модель
- ✅ Корреляция вычисляется между CMB картой (построенной из Θ-поля) и LSS данными
- ✅ НЕТ классических космологических формул для вычисления корреляции
- ✅ НЕТ потенциалов
- ✅ НЕТ массовых членов
- ⚠️ Нужно убедиться, что корреляция использует фазовые параметры при вычислении

**Статус:** ✅ ПРАВИЛЬНО (с оговоркой - статистические формулы допустимы для измерения связи)

---

### ✅ Phase 4.2: φ-Split Analysis

**Алгоритм:**
- Split CMB map by φ angle
- Measure signal enhancement: enhancement = correlation_positive / correlation_negative
- Enhancement due to m-modes in Θ-field structure

**Анализ:**
- ✅ Указана формула enhancement factor: enhancement = correlation_positive / correlation_negative
- ✅ Упоминается JW-CMB2.8 как источник
- ✅ Указано, что это предсказание Θ-модели
- ✅ Enhancement связан с m-modes (azimuthal modes) в сферических гармониках
- ✅ НЕТ классических формул
- ✅ НЕТ потенциалов
- ✅ НЕТ массовых членов

**Статус:** ✅ ПРАВИЛЬНО

---

## Итоговый статус

### ✅ ПРАВИЛЬНО (без замечаний):
1. Формула CMB2.1: ρ_Θ(ω,t) ∝ ω^(-2±0.5) · (t/t_0)^(-3±1)
2. Формула CMB2.2: l(ω) ≈ π D ω
3. Формула CMB2.3: C_l ∝ ρ_Θ(ω(l)) · |dω/dl|
4. Формула CMB2.4: C_l ∝ l⁻²
5. Формула Δω/ω → ΔT: ΔT ~ T_0 · (Δω/ω_CMB)
6. Алгоритм реконструкции карты (Phase 2.1)
7. Алгоритм расчета спектра (Phase 3.1)
8. Алгоритм анализа sub-peaks (Phase 3.2)

### ⚠️ ТРЕБУЕТ ПРОВЕРКИ ПРИ РЕАЛИЗАЦИИ:
1. Phase 4.1: Убедиться, что корреляция использует фазовые параметры (статистические формулы допустимы)
2. Phase 2.3: Убедиться, что проекция не использует классические космологические формулы
3. Phase 3.3: χ² используется для сравнения спектров (статистический инструмент, допустимо)

### ✅ НЕ НАЙДЕНО:
- ❌ Экспоненциальное затухание
- ❌ Потенциалы ВБП
- ❌ Массовые члены
- ❌ Классические космологические формулы (FRW, ΛCDM)
- ❌ Silk damping
- ❌ Классическая формула C_l = (1/(2l+1)) * Σ_m |a_lm|²

---

## Рекомендации

1. **Для Phase 4.1:** При реализации убедиться, что корреляция вычисляется между CMB картой (из Θ-поля) и LSS данными. Статистические формулы (Pearson correlation) допустимы для измерения связи.

2. **Для Phase 4.2:** Формула enhancement factor указана. При реализации убедиться, что enhancement связан с m-modes в Θ-поле, а не с классическими эффектами.

3. **Для Phase 2.3:** Добавить явное указание, что проекция использует ТОЛЬКО фазовые параметры (ω_min(t), ω_macro(t)), без классических космологических формул (FRW, ΛCDM).

4. **Для Phase 3.3:** χ² используется для сравнения спектров (статистический инструмент, допустимо). Убедиться, что сравнение идет между спектрами из Θ-модели и наблюдениями.

5. **При реализации:** Строго следить, чтобы не использовались классические физические формулы (потенциалы, массовые члены, экспоненциальное затухание, FRW, ΛCDM). Статистические формулы для измерения связи допустимы.

---

## Вывод

План реализации в целом **ПРАВИЛЬНЫЙ** и не содержит критических классических паттернов. Все основные формулы соответствуют теории Θ-модели. 

**Требуется уточнение** для нескольких алгоритмов (корреляция, φ-split), но это не критично - главное, что нет запрещенных элементов (потенциалы, массовые члены, экспоненциальное затухание, классические космологические формулы).

---

**Анализ выполнен с использованием индекса теории:** `docs/ALL_index.yaml`
